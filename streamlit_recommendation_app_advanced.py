
import streamlit as st
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns
import plotly.express as px
from fpdf import FPDF

# ุฅุนุฏุงุฏ ุงูุตูุญุฉ
st.set_page_config(page_title="ุชุญููู ุงูุฌุฏูู - ููุตุฉ ุงูุชุฌุงุฑุฉ ุงูุฐููุฉ", layout="wide")
st.title("๐ ุชุญููู ุงูุฌุฏูู ูููุตุฉ ุงูุชุฌุงุฑุฉ ุงูุฅููุชุฑูููุฉ ุงูุฐููุฉ")
st.sidebar.header("๐ ุงูุชููู ุจูู ุงูุฃูุณุงู")
section = st.sidebar.selectbox("ุงุฎุชุฑ ุงููุณู", ["ุชุญููู ุงูููุงูุณูู", "ุงูุนุฑูุถ ุงูุจูุงููุฉ", "ุชุญููู ุงููุฎุงุทุฑ", "ุงูุชูุงููู", "ุชูุฑูุฑ PDF"])

costs = {
    "ุชูุงููู ุชุทููุฑ ุงููุงุฌูุฉ ุงูุฃูุงููุฉ (Front-end)": 25000,
    "ุชูุงููู ุชุทููุฑ ุงููุงุฌูุฉ ุงูุฎูููุฉ (Back-end)": 35000,
    "ุฎูุงุฏู ุงูุงุณุชุถุงูุฉ (Cloud Hosting)": 10000,
    "ุงูุชุฑุงุฎูุต ูุงูุฃูุงู ุงูุฅููุชุฑููู": 8000,
    "ุงูุชุณููู ูุงูุฅุนูุงูุงุช": 12000,
    "ุงูุฏุนู ุงูููู ูุงูุตูุงูุฉ ุงูุณูููุฉ": 10000,
}
costs["ุฅุฌูุงูู ุงูุชูุงููู"] = sum(costs.values())

# โ ุชุนุฑูู `costs_df` ูู ุจุฏุงูุฉ ุงูููุฏ ููููู ูุชุงุญูุง ูุจู ุงุณุชุฎุฏุงูู
costs_df = pd.DataFrame(list(costs.items()), columns=["ุงูุจูุฏ", "ุงูุชูููุฉ (ุจุงูุฑูุงู ุงูุณุนูุฏู)"])

# --- ุงูุชูุงููู ---
if section == "ุงูุชูุงููู":
    st.header("๐ฐ ุชุญููู ุงูุชูุงููู")
    st.dataframe(costs_df)
    
    # โ ุงุณุชุฎุฏุงู ุงููุฎุทุท ููุท ุฏุงุฎู ูุฐุง ุงููุณู ูุถูุงู ุฃู `costs_df` ูุนุฑู ูุณุจููุง
    fig = px.bar(costs_df, x="ุงูุชูููุฉ (ุจุงูุฑูุงู ุงูุณุนูุฏู)", y="ุงูุจูุฏ", orientation="h", 
                 title="๐น ุชูุฒูุน ุงูุชูุงููู", text="ุงูุชูููุฉ (ุจุงูุฑูุงู ุงูุณุนูุฏู)", color="ุงูุชูููุฉ (ุจุงูุฑูุงู ุงูุณุนูุฏู)")
    st.plotly_chart(fig)


# --- ุชุญููู ุงูููุงูุณูู ---
if section == "ุชุญููู ุงูููุงูุณูู":
    st.header("ุชุญููู ุงูููุงูุณูู")
    competitors = {
           "ุณูุฉ": {"ููุงุท ุงูููุฉ": "ุณูููุฉ ุฅูุดุงุก ุงููุชุงุฌุฑุ ุฎูุงุฑุงุช ุฏูุน ูุชุนุฏุฏุฉ", "ููุงุท ุงูุถุนู": "ุถุนู ูู ุงูุชุญููู ุงูุนูููุ ููุฉ ุฃุฏูุงุช ุงูุฃุชูุชุฉ ุงูุฐููุฉ"},
        "ุฒุฏ": {"ููุงุท ุงูููุฉ": "ุชูุงูู ูุน ุญููู ุงูุฏูุนุ ูุงุฌูุฉ ุณููุฉุ ุฏุนู ููู", "ููุงุท ุงูุถุนู": "ูุง ููุฌุฏ ุชุญููู ุจูุงูุงุช ูุชูุฏูุ ูุง ููุฌุฏ ุฏุนู ููุฐูุงุก ุงูุงุตุทูุงุนู"},
        "Shopify": {"ููุงุท ุงูููุฉ": "ุฏุนู ุงูุฃุณูุงู ุงูุนุงูููุฉุ ุชูุงูู ูุน ุฃุฏูุงุช ุชุณููููุฉ ูุชูุฏูุฉ", "ููุงุท ุงูุถุนู": "ุชูููุฉ ุงูุงุดุชุฑุงู ูุฑุชูุนุฉุ ุชุนููุฏ ูู ุงูุฅุนุฏุงุฏ ููุชุฌุงุฑ ุบูุฑ ุงูุชููููู"},
        "Internet Solutions": {"ููุงุท ุงูููุฉ": "ุฎุจุฑุฉ ุชูููุฉ ุนุงููุฉุ ุงุณุชุถุงูุฉ ูููุฉุ ุญููู ุฃูููุฉ ูุชูุฏูุฉ", "ููุงุท ุงูุถุนู": "ุชุฑููุฒ ุฃูู ุนูู ุชุญููู ุงูุจูุงูุงุช ุงูููุฌู ููุชุฌุงุฑุ ูุง ููุฌุฏ ูุธุงู ุฐูุงุก ุงุตุทูุงุนู ูุชูุงูู"},
   "Internet Solutions": {"ููุงุท ุงูููุฉ": "ุฎุจุฑุฉ ุชูููุฉ ุนุงููุฉุ ุงุณุชุถุงูุฉ ูููุฉุ ุญููู ุฃูููุฉ ูุชูุฏูุฉ", "ููุงุท ุงูุถุนู": "ุชุฑููุฒ ุฃูู ุนูู ุชุญููู ุงูุจูุงูุงุช ุงูููุฌู ููุชุฌุงุฑุ ูุง ููุฌุฏ ูุธุงู ุฐูุงุก ุงุตุทูุงุนู ูุชูุงูู"},
        "Sky Cloud": {"ููุงุท ุงูููุฉ": "ูุฑููุฉ ูู ุงุณุชุถุงูุฉ ุงููุชุงุฌุฑุ ุฎุฏูุงุช ุณุญุงุจูุฉ ูููุฉ", "ููุงุท ุงูุถุนู": "ุนุฏู ูุฌูุฏ ุญููู ุชุญููู ุจูุงูุงุช ูุชูุฏูุฉุ ุถุนู ูู ุฃุชูุชุฉ ุงูุชุณููู"},
        "KMT": {"ููุงุท ุงูููุฉ": "ุฃูุงู ุนุงููุ ุญููู ูุชุฎุตุตุฉ ููุดุฑูุงุช ุงููุจุฑู", "ููุงุท ุงูุถุนู": "ุชูุงููู ูุฑุชูุนุฉุ ูุง ุชุณุชูุฏู ุงูุดุฑูุงุช ุงููุงุดุฆุฉ ุฃู ุงููุชุงุฌุฑ ุงูุตุบูุฑุฉ"},
        "ุณูุงุฑุช ุชุงุชุด": {"ููุงุท ุงูููุฉ": "ุญููู ุชุณููููุฉ ูููุฉุ ุงุณุชุฑุงุชูุฌูุงุช ูุชูุฏูุฉ", "ููุงุท ุงูุถุนู": "ูุง ููุฌุฏ ุชุฑููุฒ ุนูู ุงูุชุญููู ุงูุฐูู ููุจูุงูุงุช"},
        "ุฃูุงูุฑ ุงูุดุจูุงุช": {"ููุงุท ุงูููุฉ": "ุจููุฉ ุชุญุชูุฉ ูููุฉุ ุญููู ุฃูููุฉ ุดุงููุฉ", "ููุงุท ุงูุถุนู": "ููุฉ ุงูุชุฎุตูุต ูุญููู ุงูุชุฌุงุฑุฉ ุงูุฅููุชุฑูููุฉ"},
        "ุฅูุณุชุฑุง ุชู": {"ููุงุท ุงูููุฉ": "ุฏุนู ูููุ ุญููู ุชูููุฉ ูุชุนุฏุฏุฉ", "ููุงุท ุงูุถุนู": "ูุง ููุฌุฏ ุชูุงูู ุณูุณ ูุน ุงูุฐูุงุก ุงูุงุตุทูุงุนู"},
        "ุฒููุฉ ุชู": {"ููุงุท ุงูููุฉ": "ุชุตููู ุจุฑูุฌูุงุช ูุชูุฏูุฉุ ุญููู ูุฎุตุตุฉ", "ููุงุท ุงูุถุนู": "ุชุฑูุฒ ุนูู ุชุทููุฑ ุงูุจุฑูุฌูุงุช ุฃูุซุฑ ูู ุงูุชุฌุงุฑุฉ ุงูุฅููุชุฑูููุฉ"},
        "ุฃููุงุท ุงูุดุจูุฉ": {"ููุงุท ุงูููุฉ": "ุฃูุงู ุนุงููุ ุงุณุชุถุงูุฉ ูุชุทูุฑุฉ", "ููุงุท ุงูุถุนู": "ุถุนู ูู ุงูุชูุงูู ูุน ุฃูุธูุฉ ุชุญููู ุงูุจูุงูุงุช"},
        "ุจุฑูุฌ ุจููุฌ": {"ููุงุท ุงูููุฉ": "ุฎุจุฑุฉ ุทูููุฉ ูู ุงูุจุฑูุฌุฉุ ุฏุนู ูุณุชูุฑ", "ููุงุท ุงูุถุนู": "ุนุฏู ุงูุชุฑููุฒ ุนูู ุงูุฐูุงุก ุงูุงุตุทูุงุนู ูุงูุฃุชูุชุฉ"},
        "ุชูููุงุช ุงููุชุงุฌุฑ ุงูุฐููุฉ": {"ููุงุท ุงูููุฉ": "ุชูุฏูู ุญููู ูุชูุงููุฉ ูููุชุงุฌุฑุ ุฏุนู ููู ูุฎุฏูุงุช ุงูุฏูุน ุงูุฑููู", "ููุงุท ุงูุถุนู": "ูุง ููุฌุฏ ุชูุงูู ูุน ุงูุฐูุงุก ุงูุงุตุทูุงุนู ูู ุงูุชูุตูุงุช"},
        "ุญููู ุงูุจูุงูุงุช ุงูุฑูููุฉ": {"ููุงุท ุงูููุฉ": "ุชุญููู ุจูุงูุงุช ูุชูุฏูุ ุฏุนู ูุฑุงุฑุงุช ุงูุชุฌุงุฑุฉ ุงูุฅููุชุฑูููุฉ", "ููุงุท ุงูุถุนู": "ูุง ุชููุฑ ุชูุงูู ูุจุงุดุฑ ูุน ุงููุชุงุฌุฑ ุงูุฅููุชุฑูููุฉ"},
        "Cloud Market": {"ููุงุท ุงูููุฉ": "ุญูุณุจุฉ ุณุญุงุจูุฉ ูุชูุฏูุฉุ ุญููู ุฏูุน ูุฑูุฉ", "ููุงุท ุงูุถุนู": "ุนุฏู ูุฌูุฏ ุชุญููู ุจูุงูุงุช ูุชุฎุตุต"},
        "AI Commerce": {"ููุงุท ุงูููุฉ": "ุชูุงูู ูุงูู ูุน ุงูุฐูุงุก ุงูุงุตุทูุงุนูุ ุชุญููู ุณููู ุงูุนููุงุก ุจุดูู ุชููุงุฆู", "ููุงุท ุงูุถุนู": "ุชูููุฉ ุชุดุบูููุฉ ูุฑุชูุนุฉุ ุชุนููุฏ ูู ุงูุฅุนุฏุงุฏ"},
        "Ecom Tech": {"ููุงุท ุงูููุฉ": "ุชุญููู ุจูุงูุงุช ูููุ ุฏุนู ูููุดุงุฑูุน ุงููุงุดุฆุฉ", "ููุงุท ุงูุถุนู": "ููุต ูู ุงูุชูุงูู ูุน ุงูุฃุณูุงู ุงูุนุงูููุฉ"}
    }

   
    competitors_df = pd.DataFrame.from_dict(competitors, orient="index")
    st.dataframe(competitors_df)

# --- ุงูุนุฑูุถ ุงูุจูุงููุฉ ---
if section == "ุงูุนุฑูุถ ุงูุจูุงููุฉ":
    st.header("๐ ุงูุนุฑูุถ ุงูุจูุงููุฉ")
    num_merchants = np.arange(100, 5001, 500)
    subscription_fee = 250
    commission_rate = 0.025
    avg_sales_per_merchant = 12000
    revenues = (num_merchants * subscription_fee) + (num_merchants * avg_sales_per_merchant * commission_rate)
    costs = 150000 + (num_merchants * 50)
    profit = revenues - costs
    profit_df = pd.DataFrame({"ุนุฏุฏ ุงูุชุฌุงุฑ": num_merchants, "ุงูุฅูุฑุงุฏุงุช ุงูุดูุฑูุฉ": revenues, "ุตุงูู ุงูุฃุฑุจุงุญ ุงูุดูุฑูุฉ": profit})
    st.dataframe(profit_df)
    
    fig, ax = plt.subplots(figsize=(12, 6))
    sns.lineplot(x=num_merchants, y=revenues, label="ุงูุฅูุฑุงุฏุงุช", marker="o", ax=ax)
    sns.lineplot(x=num_merchants, y=profit, label="ุตุงูู ุงูุฃุฑุจุงุญ", marker="s", ax=ax)
    ax.set_xlabel("ุนุฏุฏ ุงูุชุฌุงุฑ")
    ax.set_ylabel("ุงูุฑูุงู ุงูุณุนูุฏู")
    ax.set_title("ุชุญููู ุงูุฅูุฑุงุฏุงุช ูุตุงูู ุงูุฃุฑุจุงุญ ุงููุชููุนุฉ")
    ax.legend()
    ax.grid(True)
    st.pyplot(fig)

# --- ุชุญููู ุงููุฎุงุทุฑ ---
risks = {
        "ุงูุชูุงูุณูุฉ ุงูุนุงููุฉ": "ูุฌูุฏ ููุตุงุช ูููุฉ ูู ุงูุณูู ูุฒูุฏ ูู ุตุนูุจุฉ ุงูุงุณุชุญูุงุฐ ุนูู ุงูุนููุงุก.",
        "ุงูุชูุงููู ุงูุชุดุบูููุฉ": "ูุฏ ุชุคุซุฑ ุชูุงููู ุงูุชุดุบูู ุงูุนุงููุฉ ุนูู ุงูุฑุจุญูุฉ ุฅุฐุง ูู ูุชู ุฅุฏุงุฑุชูุง ุจูุนุงููุฉ.",
        "ุงูุฃูุงู ุงูุฅููุชุฑููู": "ุถุฑูุฑุฉ ุญูุงูุฉ ุจูุงูุงุช ุงููุณุชุฎุฏููู ุถุฏ ุงููุฌูุงุช ุงูุณูุจุฑุงููุฉ ูุงูุชุณุฑูุจุงุช ุงููุญุชููุฉ.",
        "ุชุบูุฑ ุงูููุงููู ุงูุถุฑูุจูุฉ": "ุฃู ุชุบููุฑุงุช ูู ุงูุถุฑุงุฆุจ ูููู ุฃู ุชุคุซุฑ ุนูู ุงูุชูุงููู ุงูุชุดุบูููุฉ ูุงูุฃุณุนุงุฑ."
    }
if section == "ุชุญููู ุงููุฎุงุทุฑ":
    st.header("โ๏ธ ุชุญููู ุงููุฎุงุทุฑ")
    risks_df = pd.DataFrame(list(risks.items()), columns=["ุงููุฎุงุทุฑ", "ุงูุชูุงุตูู"])
    st.dataframe(risks_df)
if section == "ุชูุฑูุฑ PDF":
    st.header("๐ ุฅูุดุงุก ุชูุฑูุฑ PDF")
    pdf = FPDF()
    pdf.add_page()

    # โ ุฅุถุงูุฉ ุฎุท ูุฏุนู ุงููุบุฉ ุงูุนุฑุจูุฉ
    pdf.add_font("NotoSansArabic", '', "NotoSansArabic-Regular.ttf", uni=True)
    pdf.set_font("NotoSansArabic", size=16)
    
    pdf.cell(200, 10, "ุชุญููู ุงูุฌุฏูู - ููุตุฉ ุงูุชุฌุงุฑุฉ ุงูุฐููุฉ", ln=True, align='C')
    pdf.ln(10)

    # ุฅุถุงูุฉ ูุณู ุงููุฎุงุทุฑ ูู ุงูุชูุฑูุฑ
    pdf.set_font("NotoSansArabic", size=12)
    pdf.cell(200, 10, "ุชุญููู ุงููุฎุงุทุฑ", ln=True)
    pdf.ln(5)

    for key, value in risks.items():
        pdf.set_font("NotoSansArabic", style='B', size=12)
        pdf.cell(0, 10, key, ln=True)
        pdf.set_font("NotoSansArabic", size=10)
        pdf.multi_cell(0, 8, value)
        pdf.ln(2)
    
    # ุฅุถุงูุฉ ูุณู ุงูุชูุงููู ูู ุงูุชูุฑูุฑ
    pdf.set_font("NotoSansArabic", size=12)
    pdf.cell(200, 10, "ุชุญููู ุงูุชูุงููู", ln=True)
    pdf.ln(5)
    for key, value in costs.items():
        pdf.set_font("NotoSansArabic", style='B', size=12)
        pdf.cell(0, 10, key, ln=True)
        pdf.set_font("NotoSansArabic", size=10)
        pdf.multi_cell(0, 8, f"{value} ุฑูุงู ุณุนูุฏู")
        pdf.ln(2)

    pdf_output = "business_analysis_report.pdf"
    pdf.output(pdf_output)
    with open(pdf_output, "rb") as file:
        st.download_button(label="๐ฅ ุชุญููู ุงูุชูุฑูุฑ PDF", data=file, file_name=pdf_output, mime="application/pdf")
# --- ุฎุทุฉ ุงูุชุทููุฑ ุงููุณุชูุจููุฉ ---
if section == "ุฎุทุฉ ุงูุชุทููุฑ ุงููุณุชูุจููุฉ":
    st.header("๐ ุฎุทุฉ ุงูุชุทููุฑ ุงููุณุชูุจููุฉ")
    roadmap = {
        "ุงูุดูุฑ 1-3": "ุฅุทูุงู ูุณุฎุฉ ุชุฌุฑูุจูุฉ (MVP) ูุงุฎุชุจุงุฑ ุงูุณูู.",
        "ุงูุดูุฑ 4-6": "ุชุญููู ุจูุงูุงุช ุงูุนููุงุก ูุชุญุณูู ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู ุจูุงุกู ุนูู ุงูุชุบุฐูุฉ ุงูุฑุงุฌุนุฉ.",
        "ุงูุดูุฑ 7-12": "ุฅุทูุงู ููุฒุงุช ุงูุฐูุงุก ุงูุงุตุทูุงุนู ุงููุชูุฏูุฉุ ูุซู ุงูุชูุตูุงุช ุงูุฐููุฉ ูุงูุชุญููู ุงูุชูุจุฆู.",
        "ุงูุณูุฉ 2": "ุงูุชูุณุน ูู ุงูุฃุณูุงู ุงูุฅูููููุฉ ูุฅุถุงูุฉ ุฏุนู ููุบุงุช ูุฎุชููุฉ.",
        "ุงูุณูุฉ 3": "ุงูุงุณุชุญูุงุฐ ุนูู ุญุตุฉ ุณูููุฉ ุฃูุจุฑ ุนุจุฑ ุงูุดุฑุงูุงุช ุงูุงุณุชุฑุงุชูุฌูุฉ."
    }
    roadmap_df = pd.DataFrame(list(roadmap.items()), columns=["ุงููุฑุญูุฉ", "ุงููุตู"])
    st.dataframe(roadmap_df)